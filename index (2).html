<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parsi Intestate Succession Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-bottom: 3px solid #667eea;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 24px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            max-width: 100%;
            max-height: 100%;
            border-radius: 50%;
        }

        .project-info {
            flex: 1;
        }

        .project-info h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .project-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }

        .detail-box {
            background: rgba(102, 126, 234, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .detail-box h3 {
            color: #667eea;
            font-size: 1.1em;
            margin-bottom: 8px;
        }

        .team-members {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .member {
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        .tab-nav {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .tab-button {
            background: none;
            border: none;
            padding: 12px 25px;
            font-size: 1.1em;
            font-weight: 600;
            color: #667eea;
            cursor: pointer;
            transition: color 0.3s ease, transform 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .tab-button.active {
            color: #764ba2;
            border-bottom: 3px solid #764ba2;
            transform: translateY(-2px);
        }

        .tab-content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .input-section, .result-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .input-section h2, .result-section h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 1.8em;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group select, .form-group input[type="text"], .form-group input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group select:focus, .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }
        
        .radio-group {
             display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-item, .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover, .radio-item:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .checkbox-item input[type="checkbox"], .radio-item input[type="radio"] {
            width: auto;
            margin: 0;
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .family-tree {
            text-align: center;
            padding: 20px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .tree-node {
            display: inline-block;
            margin: 10px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            min-width: 120px;
        }
        .tree-name {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .tree-relation {
            font-size: 0.9em;
            color: #eee;
        }

        .deceased {
            border: 3px solid #e74c3c;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .heir {
            border: 3px solid #27ae60;
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }
        
        .branch {
            border: 3px solid #3498db;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }
        
        .predeceased-child {
            border: 3px dashed #f39c12;
            background: #f1c40f;
            color: black;
        }


        .tree-level {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }

        .connection-line {
            width: 2px;
            height: 30px;
            background: #667eea;
            margin: 0 auto;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .results-table th, .results-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e6ed;
        }

        .results-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
        }

        .results-table tr:hover {
            background: rgba(102, 126, 234, 0.05);
        }

        .section-reference {
            background: rgba(102, 126, 234, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #667eea;
        }

        .section-reference h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .hidden {
            display: none;
        }
        .children-names {
            margin-bottom: 15px;
        }

        .child-name-input {
            margin-bottom: 10px;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 8px;
            background: #fafafa;
        }

        .child-name-input input {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            font-size: 14px;
        }

        .child-name-input label {
            font-size: 14px;
            color: #667eea;
            margin-bottom: 5px;
            display: block;
        }
        
        .grandchild-details {
            margin-top: 15px;
            padding-left: 15px;
            border-left: 2px dashed #999;
        }
        
        .blog-post, .workbook-section {
            padding: 20px;
            margin-bottom: 20px;
            background: #f9f9f9;
            border-radius: 10px;
            border: 1px solid #eee;
        }
        
        .blog-post h3 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .workbook-section h3 {
             color: #333;
            margin-bottom: 10px;
        }
        .workbook-section ol {
            padding-left: 20px;
        }
        
        .workbook-section li {
            margin-bottom: 10px;
        }
        
        .answer-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 15px;
            transition: background 0.3s ease;
        }
        
        .answer-button:hover {
            background: #764ba2;
        }
        
        .answer-content {
            margin-top: 15px;
            padding: 15px;
            background: #e9e9f9;
            border-radius: 8px;
            border: 1px solid #c8c8e8;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }

            .project-details {
                grid-template-columns: 1fr;
            }

            .main-content {
                grid-template-columns: 1fr;
            }
            .tab-nav {
                flex-direction: column;
            }

            .checkbox-group, .radio-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <img src="assets/images/logo.png" alt="Logo image">
            </div>
            <div class="project-info">
                <h1>National Law School of India University</h1>
                <h1>Understanding Heirship: Who should inherit</h1>
                <div class="project-details">
                    <div class="detail-box">
                        <h3>Course:</h3>
                        <p>Family Law 2 Group Project</p>
                    </div>
                    <div class="detail-box">
                        <h3>Institution:</h3>
                        <p>National Law School of India University (NLSIU), Bangalore</p>
                    </div>
                    <div class="detail-box">
                        <h3>Project Guide:</h3>
                        <p>Prof. Meenakshi Ramkumar, Assistant Professor of Law</p>
                    </div>
                    <div class="detail-box">
                        <h3>üë• Team Members:</h3>
                        <div class="team-members">
                            <span class="member">Rakshit G Dwaram (L24062)</span>
                            <span class="member">Dharmakeerthi (L24026)</span>
                            <span class="member">Sunil V (L24090)</span>
                            <span class="member">Sulekh Yadav (L24089)</span>
                            <span class="member">Suhas K (L24088)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="tab-nav">
            <button class="tab-button active" onclick="showTab('calculator')">Calculator</button>
            <button class="tab-button" onclick="showTab('blog')">Blog</button>
            <button class="tab-button" onclick="showTab('workbook')">Workbook</button>
        </div>

        <div id="calculator" class="tab-content active">
            <div class="main-content">
                <div class="input-section">
                    <h2>üèõÔ∏è Succession Calculator</h2>
                    <form id="successionForm">
                        <div class="form-group">
                            <label for="gender">Gender of Deceased Parsi:</label>
                            <select id="gender" required>
                                <option value="">Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="deceasedName">Name of Deceased:</label>
                            <input type="text" id="deceasedName" placeholder="Enter deceased person's name" required>
                        </div>

                        <div class="form-group">
                            <label>Surviving Family Members:</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="spouse" name="family" value="spouse" onchange="toggleNameInput('spouse')">
                                    <label for="spouse">Spouse (Widow/Widower)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="father" name="family" value="father" onchange="toggleNameInput('father')">
                                    <label for="father">Father</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="mother" name="family" value="mother" onchange="toggleNameInput('mother')">
                                    <label for="mother">Mother</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group hidden" id="spouseNameGroup">
                            <label for="spouseName">Spouse Name:</label>
                            <input type="text" id="spouseName" placeholder="Enter spouse's name">
                        </div>

                        <div class="form-group hidden" id="fatherNameGroup">
                            <label for="fatherName">Father's Name:</label>
                            <input type="text" id="fatherName" placeholder="Enter father's name">
                        </div>

                        <div class="form-group hidden" id="motherNameGroup">
                            <label for="motherName">Mother's Name:</label>
                            <input type="text" id="motherName" placeholder="Enter mother's name">
                        </div>

                        <div class="form-group">
                            <label for="childrenCount">Number of Children (including predeceased):</label>
                            <input type="number" id="childrenCount" min="0" value="0" onchange="generateChildrenInputs()">
                        </div>

                        <div id="childrenDetails" class="children-names"></div>
                        
                        <div id="nextOfKinSection" class="form-group hidden">
                            <label>No lineal descendants, spouse, or parents found. Please select the highest-ranking group of living relatives from Part II of Schedule II:</label>
                            <div class="radio-group">
                                <div class="radio-item"><input type="radio" name="nextOfKin" value="fatherMother" id="nk1"> <label for="nk1">Father and mother</label></div>
                                <div class="radio-item"><input type="radio" name="nextOfKin" value="brothersSisters" id="nk2"> <label for="nk2">Brothers and sisters (and their descendants)</label></div>
                                <div class="radio-item"><input type="radio" name="nextOfKin" value="grandparents" id="nk3"> <label for="nk3">Paternal and maternal grandparents</label></div>
                                <div class="radio-item"><input type="radio" name="nextOfKin" value="grandparentsChildren" id="nk4"> <label for="nk4">Children of paternal and maternal grandparents</label></div>
                                <div class="radio-item"><input type="radio" name="nextOfKin" value="grandparentsParents" id="nk5"> <label for="nk5">Paternal and maternal grandparents‚Äô parents</label></div>
                                <div class="radio-item"><input type="radio" name="nextOfKin" value="grandparentsParentsChildren" id="nk6"> <label for="nk6">Grandparent‚Äôs parents children (and their descendants)</label></div>
                                <div class="radio-item"><input type="radio" name="nextOfKin" value="halfBrothersSisters" id="nk7"> <label for="nk7">Half brothers and sisters (and their descendants)</label></div>
                                <div class="radio-item"><input type="radio" name="nextOfKin" value="brothersWidows" id="nk8"> <label for="nk8">Widows of brothers or half brothers and widowers of sisters or half sisters</label></div>
                                <div class="radio-item"><input type="radio" name="nextOfKin" value="grandparentsChildrenWidows" id="nk9"> <label for="nk9">Paternal or maternal grandparents children‚Äôs widows or widowers</label></div>
                                <div class="radio-item"><input type="radio" name="nextOfKin" value="descendantWidows" id="nk10"> <label for="nk10">Widows or widowers of deceased lineal descendants</label></div>
                                <div class="radio-item"><input type="radio" name="nextOfKin" value="none" id="nk11"> <label for="nk11">None of the above</label></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="propertyValue">Total Property Value (‚Çπ):</label>
                            <input type="number" id="propertyValue" min="1" step="0.01" placeholder="Enter property value" required>
                        </div>

                        <button type="button" class="calculate-btn" onclick="calculateSuccession()">
                            Calculate Inheritance Shares
                        </button>
                    </form>
                </div>

                <div class="result-section">
                    <h2>üìä Succession Results</h2>
                    <div id="results" class="hidden">
                        <div class="family-tree" id="familyTree"></div>
                        <table class="results-table" id="resultsTable">
                            <thead>
                                <tr>
                                    <th>Heir</th>
                                    <th>Share Ratio</th>
                                    <th>Amount (‚Çπ)</th>
                                </tr>
                            </thead>
                            <tbody id="resultsBody"></tbody>
                        </table>
                        <div class="section-reference" id="sectionReference"></div>
                    </div>
                    <div id="placeholder" style="text-align: center; padding: 50px; color: #666;">
                        Fill in the details and click calculate to see the inheritance distribution according to the Indian Succession Act, 1925.
                    </div>
                </div>
            </div>
        </div>

        <div id="blog" class="tab-content">
            <div class="blog-post">
                <h1>Introduction Paris Law</h1>
    <p>Intestate succession among the Parsi community in India is governed by the Indian Succession Act, 1925. Prior to 1837, the English common law was applicable to the Parsis but their property was subject to certain exceptions such as marriage and bigamy. The Parsee Chattels Real Act, 1837 declared that as from 1 June 1837 the English law of primogeniture would not apply to any immovable property of the Parsis of Bombay but made them subject in all cases of intestacy as regards every description of property to the English Statute of Distribution. The Parsee Chattels Real Act, 1837 was the result of an appeal to the legislature by the Parsis of Bombay presidency when a Parsi died intestate, in 1835, and his eldest son claimed the whole of the immovable property in Bombay by the English law of primogeniture.</p>
    <p>Later, the Parsee Intestate Succession Act, 1865 was passed, which made significant changes by granting a right to a share in the property of a Parsi dying intestate to the widow and the daughters, who were earlier only entitled to a right to maintenance. These provisions relating to intestate succession were incorporated in the Indian Succession Act, 1925. Then the amending Act of 1939 substituted new rules. It improved the position of the widow and daughter relative to the son in respect of succession to the property of a male intestate; allotted a share in the estate of a male Parsi intestate to his father and mother; excluded the widower of a predeceased daughter of the intestate from the share given to him; and improved the position of widows of lineal descendants of the deceased. The amending Act of 1991 made further substantial changes, granting the widower equal right to a widow, improving the share of the daughter, giving parity of shares to the mother and father between themselves and including more classes of specified heirs.</p>

    <h2>Order of Succession</h2>
    <p>The Indian Succession Act, 1925 stipulates that in the event of a male or female Parsi dying intestate, the following will be the order of succession among the heirs:</p>
    <ol>
        <li>first in order are the following:
            <ul>
                <li>widow or widower, children and parents.</li>
                <li>lineal descendants, the nearer excluding the more remote,</li>
            </ul>
        </li>
        <li>then, next in order are the following heirs, the parents taking along with the heirs:
            <ol type="i">
                <li>father and mother.</li>
                <li>brothers and sisters (other than half brothers and sisters) and lineal descendants of such of them as have predeceased the intestate;</li>
                <li>paternal and maternal grandparents.</li>
                <li>children of paternal and maternal grandparents and the lineal descendants of such of them as have predeceased the intestate;</li>
                <li>paternal and maternal grandparents‚Äô parents;</li>
                <li>paternal and maternal grandparents‚Äô parents‚Äô children and the lineal descendants of such of them as have predeceased the intestate,</li>
            </ol>
        </li>
        <li>thereafter, if the deceased leaves neither lineal descendants nor a widow or widower, nor a widow or widower of any lineal descendant, the heirs mentioned below succeed to the whole property:
            <ul>
                <li>father and mother;</li>
                <li>brothers and sisters (other than half brothers and sisters) and lineal descendants of such of them as have predeceased the intestate;</li>
                <li>paternal and maternal grandparents;</li>
                <li>children of paternal and maternal grandparents and the lineal descendants of such of them as have predeceased the intestate;</li>
                <li>paternal and maternal grandparents‚Äô parents;</li>
            </ul>
        </li>
    </ol>

    <h2>Rules of distribution</h2>
    <p>The distribution of the estate of a Parsi intestate is made according to the rules which follow:</p>
    <ol>
        <li><strong>Widow or widower and children</strong>- When a Parsi dies intestate leaving a widow or widower and children, the distribution among them will be equal. In the absence of widow or widower, the children take among themselves equally. When the Parsi dies leaving one or both parents, children and a widow or widower, the property will be divided in such a way that the parent or each of the parents will take half the share that each child takes.</li>
        <li><strong>Predeceased child</strong>-When a Parsi dies, leaving any lineal descendant and a child of such intestate has predeceased him, the division of the share of the property of which the intestate has died intestate which such child would have taken if living at the intestate‚Äôs death must be in accordance with the following rules:
            <ul>
                <li>where the deceased child was a son, his widow and children will receive equal shares as if he had died immediately after the intestate‚Äôs death; but where such deceased son has left a widow or a widower of a lineal descendant but no lineal descendant, the residue of his share after such distribution has been made must be divided in accordance with the provisions of the Indian Succession Act, 1925 as property of which the intestate has died intestate, and in making the division of such residue the deceased son of the intestate must not be taken into account;</li>
                <li>where the deceased child was a daughter, her share will be divided equally among her children;</li>
                <li>where any child of the deceased child has also died during the lifetime of the intestate, the share which he or she would have taken if living at the intestate‚Äôs death must be divided in the manner as stated in head (a) or (b) above, as appropriate;</li>
                <li>where a remoter lineal descendant of the intestate has died during the lifetime of the intestate, the rule set out in head (c) above will apply mutatis mutandis to the division of any share to which he or she would have been entitled if living at the intestate‚Äôs death by reason of the predecease of all the intestate‚Äôs lineal descendants directly between him or her and the intestate</li>
            </ul>
        </li>
        <li><strong>Next of kin</strong>- When a Parsi dies leaving neither lineal descendants nor a widow or widower nor a widow or widower of any lineal descendant, then his or her next of kin, in the statutory order are entitled to succeed to the whole of the property of which he or she dies intestate. The next of kin standing first in the list as provided in the schedule to the Indian Succession Act will be preferred to those standing second, the second to the third, and so on in succession, and the property must be distributed in such a way that each male and female standing in the same degree of propinquity receive equal shares</li>
        <li><strong>No specified relative</strong>- Where there is no relative entitled to succeed under any of the above rules, the property will be divided equally among those of the intestate‚Äôs relatives who are in the nearest degree of kindred to the intestate</li>
    </ol>

    <h2>REFERENCES</h2>
    <ol>
        <li>The Halsbury‚Äôs Laws of India</li>
        <li>Paruck, The Indian Succession Act, LexisNexis Butterworths</li>
        <li>Indian Succession Act, 1925 Pt V Chapter III</li>
    </ol>
            </div>
             <div class="blog-post">
                <h3>Understanding the Concept of Per Stirpes</h3>
                <p>Dive into the legal principle of 'per stirpes' (by branch), which is a cornerstone of Parsi succession law. This article explains how the share of a predeceased child is distributed among their own children, ensuring that the inheritance stays within the family branch.</p>
            </div>
        </div>

        <div id="workbook" class="tab-content">
            <div class="workbook-section">
                <h2>Workbook: Test Your Knowledge</h2>
                <p>Use these exercises to practice applying the principles of Parsi intestate succession. Use the calculator to verify your answers.</p>
                
                <h3>Case 1</h3>
                <h4>The Estate of Donald Ponnawala</h1>

                    <p>Mr. Donald Ponnawala, a former politician and real estate mogul, passed away intestate on August 8, 2025. A devout Parsi, he was known for his promiscuous lifestyle, involvement in a crypto scam, and for building ‚Äúthe wall‚Äù during his tenure as Prime Minister. At the time of his death, he left behind a fortune of Rs. 900 crore.</p>

                    <p>He is survived by the following heirs:</p>

                    <ul>
                        <li><strong>Hilary Ponnawala</strong> ‚Äì His loving wife and a devout Parsi.</li>
                        <li><strong>Hunter Ponnawala</strong> ‚Äì His eldest son, a celebrated war veteran who received the President‚Äôs Medal of Honor for his bravery in the Ukraine wars.</li>
                        <li><strong>Joe Sepstein Ponnawala</strong> ‚Äì His younger son, who, along with his father, built a man-made island named ‚ÄúSepstein Paradise.‚Äù</li>
                        <li><strong>Haley Ponnawala</strong> ‚Äì His daughter, a socialist rebel who had distanced herself from the family due to political differences.</li>
                    </ul>
                <button class="answer-button" onclick="toggleAnswer('answer1')">Show Answer</button>
                <div id="answer1" class="answer-content hidden">
                    <h4>Answer:</h4>
                    <h1>Distribution of Donald Ponnawala's Wealth</h1>

                        <h2>Scenario 1: With Wife and Children</h2>
                        <p>As per Section 51(1)(a), a Parsi intestate's wife and children are entitled to receive the property in equal shares. In this case, Hilary, Hunter, Joe, and Haley are all entitled to receive an equal share of Donald‚Äôs property.</p>
                        <p>Donald‚Äôs property, valued at <strong>Rs. 900 crore</strong>, would be divided among his four heirs as follows:</p>
                        <ul>
                            <li><strong>Hilary Ponnawala:</strong> Rs. 225 crore</li>
                            <li><strong>Hunter Ponnawala:</strong> Rs. 225 crore</li>
                            <li><strong>Joe Sepstein Ponnawala:</strong> Rs. 225 crore</li>
                            <li><strong>Haley Ponnawala:</strong> Rs. 225 crore</li>
                        </ul>

                        <h2>Scenario 2: If Hilary had Predeceased Donald</h2>
                        <p>If Hilary had predeceased Donald, Section 51(1)(b) would apply. This section states that in the absence of a widow/widower, the children divide the share equally. The division of the <strong>Rs. 900 crore</strong> estate would be as follows:</p>
                        <ul>
                            <li><strong>Hunter Ponnawala:</strong> Rs. 300 crore</li>
                            <li><strong>Joe Sepstein Ponnawala:</strong> Rs. 300 crore</li>
                            <li><strong>Haley Ponnawala:</strong> Rs. 300 crore</li>
                        </ul>

                        <h2>Scenario 3: With Mother, Wife, and Children</h2>
                        <p>In the case that Donald‚Äôs mother, Ivanka Sethi, was also alive, in addition to his wife and all the children, Section 51(2) would be applied. As per this section, the widow and children would receive equal shares (1x), and the mother of the intestate would receive half of the share of the children (0.5x). The total property is <strong>Rs. 900 crore</strong>.</p>
                        <p>The division would take place in the following manner, using a ratio of 2:1 for ease of calculation (2x for the widow/children, 1x for the mother):</p>
                        <table class="distribution-table">
                            <thead>
                                <tr>
                                    <th>Heir</th>
                                    <th>Share (in x)</th>
                                    <th>Total Value</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Hilary Ponnawala</td>
                                    <td>2x</td>
                                    <td>Rs. 200 crore</td>
                                </tr>
                                <tr>
                                    <td>Hunter Ponnawala</td>
                                    <td>2x</td>
                                    <td>Rs. 200 crore</td>
                                </tr>
                                <tr>
                                    <td>Joe Sepstein Ponnawala</td>
                                    <td>2x</td>
                                    <td>Rs. 200 crore</td>
                                </tr>
                                <tr>
                                    <td>Haley Ponnawala</td>
                                    <td>2x</td>
                                    <td>Rs. 200 crore</td>
                                </tr>
                                <tr>
                                    <td>Ivanka Sethi</td>
                                    <td>1x</td>
                                    <td>Rs. 100 crore</td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="note">Total shares: 2+2+2+2+1=9. Therefore, 900 / 9 = 100 crore per share (x).</p>

                        <div class="reasoning">
                            <h3>Reasoning for Section 51</h3>
                            <p>Section 51 of the Indian Succession Act clearly focuses on the immediate family of the intestate, including the widow/widower, children, and parents. This section ensures equality among the widower and children, where the estate is divided equally among them. This is crucial as it ensures the widower's sustenance is not dependent on the children's will. It is only in the absence of a widow/widower that the children inherit the entire estate equally. Section 51(2) also acknowledges the obligation towards the deceased's parents by granting them a small part of the wealth while prioritizing the immediate family.</p>
                        </div>

                </div>
                
                <h3>Case 2</h3>
                 <h1>The Estate of Donald Ponnawala</h1>

                <p>Mr. Donald Ponnawala, a former politician and a real estate mogul, and a devout Parsi, known for his crypto scam and for building "the wall" during his stint as the Prime Minister, died intestate on August 8, 2025. He left behind a wealth of <strong>Rs. 900 crore</strong>. He had claimed to be leading a celibate lifestyle, therefore he did not marry anyone during his lifetime and did not leave any known lineal descendants at the time of his death.</p>

                <p>His next of kin included:</p>
                <ul>
                    <li><strong>Bill Ponnawala:</strong> Donald‚Äôs father, known for his promiscuous lifestyle and alcoholic addiction.</li>
                    <li><strong>Elon Ponnawala:</strong> Donald‚Äôs estranged brother, who married a Muslim from Egypt and had two sons with her. His marriage to a Muslim led the family to cut ties with him.</li>
                    <li><strong>Sofie Ponnawala:</strong> Donald‚Äôs sister, a successful architect and a devout Parsi wife.</li>
                    <li><strong>Ted Ponnawala:</strong> Donald‚Äôs half-brother, who was currently studying at the country‚Äôs premier law institute.</li>
                </ul>
                <button class="answer-button" onclick="toggleAnswer('answer2')">Show Answer</button>
                <div id="answer2" class="answer-content hidden">
                    <h4>Answer:</h4>
                    
                        <h1>Intestate Succession for a Parsi with No Direct Heirs</h1>
                        <p>In a case where a Parsi intestate has left neither a widow/widower nor any lineal descendants, the property would devolve as per <strong>Section 55</strong> of the Indian Succession Act. As per this section, the property will completely devolve to the next of kin as set out in <strong>Part II of Schedule II</strong>. The higher-ranked kin inherits the property completely, and nothing shall devolve to a lower-ranked kin in the presence of a higher-ranked kin. If there are multiple kin of the same rank, the property shall be divided among them equally.</p>

                        <h2>Distribution of Donald Ponnawala's Estate</h2>

                        <h3>Case 1: With Father Bill Ponnawala Alive</h3>
                        <p>Since the father is ranked first among all the kins in Part II of Schedule II, Donald‚Äôs father, Bill Ponnawala, will get the entire property of Donald, worth <strong>Rs. 900 crore</strong>. His brother Elon, sister Sofie, and half-brother Ted will not receive anything.</p>

                        <h3>Case 2: If Father Bill Ponnawala had Predeceased Donald</h3>
                        <p>In this scenario, the next of kin would be the brothers and sisters. In this case, it would be Elon and Sofie. Both would divide the estate in equal shares. The half-brother, Ted, would get nothing.</p>
                        <ul>
                            <li><strong>Elon Ponnawala:</strong> Rs. 450 crore</li>
                            <li><strong>Sofie Ponnawala:</strong> Rs. 450 crore</li>
                        </ul>
                        <p>It is only in the absence of the father, brother, and sister that a half-brother would be eligible to inherit the property.</p>

                        <div class="reasoning">
                            <h3>Reasoning</h3>
                            <p>The Parsi intestate property division is primarily focused on the widow/widower and lineal descendants. It is only in the absence of any of them that the property will be distributed among the next of kin. Section 55 ensures that the property moves on to the closest living kin beyond the immediate family, according to a specified order of succession laid out in Schedule II Part II of the Act. This prevents the estate from being ownerless. The nearest kin (higher-ranked) is preferred to the second in line, reinforcing the idea of retaining the property within the family.</p>
                        </div>

                </div>
                <h3>Case 3</h3>
                <h1>The Estate of Noshirwan Dastur</h1>

                <p>Noshirwan Dastur, a visionary Parsi industrialist renowned for his construction company and for building many art-of-the-state buildings, has passed away. He left an estate valued at <strong>‚Çπ150 Crores</strong> but, true to his legacy, he never created a will. His family includes:</p>

                <ul>
                    <li><strong>Shirin Dastur:</strong> His traditional, religious wife and a firm believer in Zoroastrian institutions.</li>
                    <li><strong>Farhad Dastur:</strong> His beloved predeceased son, who left behind his widow Meher and two children, Rumi and Rita.</li>
                    <li><strong>Khorshed Dastur:</strong> His unmarried sister, a highly intellectual woman pursuing her law degree from Oxford University.</li>
                    <li><strong>Delnaz Dastur:</strong> His predeceased daughter, who was married to Zubin, a renowned politician and a contender for the prime minister's post in India. They had three children: Armin, Cyrus, and Nina.</li>
                    <li><strong>Rumi:</strong> Died an unfortunate death in the COVID pandemic, leaving behind his widow Katy and one child, Zenobia.</li>
                </ul>
                <button class="answer-button" onclick="toggleAnswer('answer3')">Show Answer</button>
                <div id="answer3" class="answer-content hidden">
                    <h4>Answer:</h4>
                    <h1>Noshirwan Dastur's Estate Distribution</h1>

                    <h2>Primary Heirs and Distribution</h2>
                    <p>According to <strong>Section 53(a)</strong> of the Indian Succession Act, the estate is divided equally among the deceased's widow and lineal descendants. In this case, the primary heirs are Shirin (wife), Farhad (son), and Delnaz (daughter).</p>
                    <p>Because both lineal descendants, Farhad and Delnaz, passed away before Noshirwan, the principle of 'per stirpes' (by the branch) applies. This means that each deceased lineal descendant‚Äôs share will pass down to their own descendants.</p>

                    <h3>Main Division (‚Çπ150 Crore Total)</h3>
                    <ul>
                        <li><strong>Shirin Dastur (Widow):</strong> ‚Çπ50 Crore</li>
                        <li><strong>Farhad Dastur (Predeceased Son):</strong> ‚Çπ50 Crore</li>
                        <li><strong>Delnaz Dastur (Predeceased Daughter):</strong> ‚Çπ50 Crore</li>
                    </ul>

                    <h3>Distribution of Predeceased Son Farhad's Share (‚Çπ50 Crore)</h3>
                    <p>Farhad's share goes to his widow (Meher) and two children (Rumi and Rita). It is divided equally as per Section 53(a) & 51(a).</p>
                    <ul class="sub-list">
                        <li><strong>Meher (widow):</strong> ‚Çπ16.6 Crore</li>
                        <li><strong>Rumi (predeceased son):</strong> ‚Çπ16.6 Crore</li>
                        <li><strong>Rita (daughter):</strong> ‚Çπ16.6 Crore</li>
                    </ul>

                    <h4>Further Distribution of Predeceased Grandson Rumi's Share (‚Çπ16.6 Crore)</h4>
                    <p>Rumi is also predeceased but has lineal descendants. Section 53(d) would apply, and his share would be divided between his widow and child in accordance with Sections 53(a) and 51(a).</p>
                    <ul class="sub-list">
                        <li><strong>Katy (widow):</strong> ‚Çπ8.3 Crore</li>
                        <li><strong>Zenobia (daughter):</strong> ‚Çπ8.3 Crore</li>
                    </ul>

                    <h3>Distribution of Predeceased Daughter Delnaz's Share (‚Çπ50 Crore)</h3>
                    <p>Noshirwan's predeceased daughter, Delnaz, will have her share divided among her husband (Zubin) and her children (Armin, Cyrus, and Nina), as per Sections 53(b) and 51(a). Note: The prompt states that the share would be divided amongst her husband and children, but according to the correct law (Section 53(b)), the share would be divided amongst her children and the widow/widower of the predeceased child receives a specific share. Assuming the division is equal for simplicity, based on the prompt's provided figures:</p>
                    <ul class="sub-list">
                        <li><strong>Zubin (husband):</strong> ‚Çπ12.5 Crore</li>
                        <li><strong>Armin (son):</strong> ‚Çπ12.5 Crore</li>
                        <li><strong>Cyrus (son):</strong> ‚Çπ12.5 Crore</li>
                        <li><strong>Nina (daughter):</strong> ‚Çπ12.5 Crore</li>
                    </ul>

                    <h2>Status of Other Relatives</h2>
                    <p><strong>Khorshed (Sister):</strong> These relatives will not inherit anything. They are considered secondary heirs and would only inherit if there were no primary heirs (widow or lineal descendants).</p>

                    <div class="reasoning">
                        <h3>Reasoning</h3>
                        <p>The way in which Section 53 of the Indian Succession Act works for Parsis is that property goes 'per stirpes'. This reflects that the branch of each child receives property even if the child died before the main intestate. This ensures that the share of a predeceased child doesn‚Äôt vanish but rather passes on to their own lineal descendants. The provisos (a-d) cover different situations so that widows and remote descendants (like grandchildren or great-grandchildren) still get their proper share.</p>
                        <p>That‚Äôs why, in Noshirwan‚Äôs case, even though Farhad and Delnaz both died earlier, their families step into their shoes and get what they would have received. Rumi‚Äôs daughter Zenobia, though a more distant descendant, is also protected because of proviso (d).</p>
                        <p>As for Khorshed, since she is a sister (a collateral heir), she is excluded here because the law gives clear priority to the widow and lineal descendants. The Parsi scheme for succession prefers direct family lines over collateral heirs when distributing property.</p>
                    </div>
                </div>
                <h3>Case 4</h3>
                <h1>The Estate of Jamsetji Tata</h1>

                <p>Jamsetji Tata, a visionary Parsi industrialist renowned for his love of animals and a notorious aversion to bureaucracy, has passed away, leaving an estate valued at <strong>‚Çπ100 Crore</strong>. True to his legacy, he never created a will.</p>
                
                <p>His bereaved family includes:</p>
                <ul>
                    <li><strong>Hirabai Tata:</strong> His dedicated wife, left to handle his unplanned estate.</li>
                    <li><strong>Dorabji Tata and Ratan Tata:</strong> His two beloved sons, both of whom tragically died in a recent accident.</li>
                    <li><strong>Leah Tata:</strong> The wife of Dorabji Tata, who died due to labor complications when Naval was born.</li>
                    <li><strong>Ratan Tata:</strong> Never married and died unmarried.</li>
                    <li><strong>Naval Tata:</strong> The son of Dorabji, who died due to a terror attack in Mumbai.</li>
                    <li><strong>Nosherwanji Tata:</strong> Jamsetji's elderly father, who survived him.</li>
                    <li><strong>Jamshedbai Tata:</strong> His unmarried sister, a trailblazer for women‚Äôs empowerment.</li>
                    <li><strong>Sylla Tata:</strong> The only child of Jamsetji‚Äôs late sister, Meherbai Tata.</li>
                    <li><strong>Sooni Tata:</strong> The widow of his deceased brother, Hormusji Tata, who remarried after his death.</li>
                    <li><strong>Shapoorji Mistry:</strong> The stepson from Hirabai‚Äôs previous marriage (bearing the surname Mistry).</li>
                </ul>

                <p>Due to a family rift, Dorabji had moved out a year earlier and was not in contact with his father. To compound the sorrow, Jamsetji‚Äôs mother, Ishwarbai Tata, passed away only a week before him.</p>

                <button class="answer-button" onclick="toggleAnswer('answer4')">Show Answer</button>
                <div id="answer4" class="answer-content hidden">
                    <h4>Answer:</h4>
                    <h1>Jamsetji Tata's Estate Distribution</h1>

                    <h2>Primary Heirs and Distribution</h2>
                    <p>Based on the Parsi intestate succession laws, we can identify the following statuses for the relatives:</p>
                    <ul>
                        <li><strong class="list-item">Hirabai Tata:</strong> Widow (ALIVE, eligible).</li>
                        <li><strong class="list-item">Dorabji Tata:</strong> Son (DEAD).</li>
                        <li><strong>Leah Tata (Dorabji's wife):</strong> DEAD.</li>
                        <li><strong>Naval Tata (Dorabji's son):</strong> DEAD.</li>
                        <li><strong class="list-item">Ratan Tata:</strong> Son (DEAD, unmarried).</li>
                        <li><strong class="list-item">Nosherwanji Tata:</strong> Father (ALIVE, eligible).</li>
                        <li><strong class="list-item">Jamshedbai Tata:</strong> Unmarried sister (eligible only if no nearer heirs).</li>
                        <li><strong class="list-item">Sylla Tata:</strong> Daughter of Jamsetji‚Äôs late sister (eligible only if we reach that category).</li>
                        <li><strong class="list-item">Sooni Tata:</strong> Widow of Jamsetji's brother, but she remarried, so she is excluded from inheriting.</li>
                        <li><strong class="list-item">Shapoorji Mistry:</strong> Stepson (NOT an heir under the Statute, as stepchildren are not considered lineal descendants).</li>
                    </ul>
                    
                    <p><strong>Status of Jamsetji‚Äôs children and grandchildren:</strong></p>
                    <ul>
                        <li>Both of his sons (Dorabji and Ratan) are dead, as are his grandson (Naval), all having predeceased Jamsetji.</li>
                        <li>Jamsetji‚Äôs mother, Ishwarbai Tata, is also dead, having passed away a week before him.</li>
                    </ul>

                    <h3>Distribution of the ‚Çπ100 Crore Estate</h3>
                    <p>Since Jamsetji died leaving no living lineal descendant (his sons and grandson all predeceased him) but did leave a widow, the distribution is governed by <strong>Section 54</strong> of the Indian Succession Act.</p>
                    <ul>
                        <li><strong>Hirabai Tata (Widow):</strong> Receives <strong>‚Çπ50 Crore</strong>.
                            <p>According to Section 54(a), if the intestate leaves a widow but no lineal descendants or widow of a lineal descendant, the widow takes half of the property.</p>
                        </li>
                        <li><strong>Nosherwanji Tata (Father):</strong> Receives <strong>‚Çπ50 Crore</strong>.
                            <p>The other half of the estate is the ‚Äúresidue.‚Äù As per Section 54(d), this residue must go to the next of kin in the order specified in Part I of Schedule II. The first-preference relatives are ‚ÄúFather and mother.‚Äù Since Jamsetji‚Äôs mother died a week earlier, the surviving father takes the entire residue.</p>
                        </li>
                    </ul>

                    <h2>Status of Other Relatives</h2>
                    <ul>
                        <li><strong>Children/descendants (Dorabji, Ratan, Naval):</strong> They receive no share, as they all predeceased Jamsetji. Section 54 applies only when no lineal descendant survives.</li>
                        <li><strong>Widow of a lineal descendant (e.g., Leah, or any spouse of Naval):</strong> No share. Leah died long before, and there is no living widow of any lineal descendant at the time of Jamsetji‚Äôs death. Therefore, clauses 54(b) and 54(c) do not apply.</li>
                        <li><strong>Jamshedbai (Sister):</strong> Excluded. Siblings are a lower rank than the father in Schedule II, Part I. Since the father survives and takes the entire residue, the succession never moves down to the siblings' rank.</li>
                        <li><strong>Sylla (Niece, child of a late sister):</strong> Excluded. Nieces and nephews are a lower rank than father/mother (and even siblings). With the father alive, Schedule II never reaches them.</li>
                        <li><strong>Sooni (Remarried widow of a deceased brother):</strong> Excluded. Affinal relatives like a brother‚Äôs widow are not in the first rank of Part I, and the succession never gets past the father if he survives.</li>
                        <li><strong>Shapoorji Mistry (Stepson):</strong> Has no statutory protection under Parsi intestate law. Stepchildren are not considered ‚Äúlineal descendants.‚Äù</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabId) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabId).classList.add('active');

            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => {
                button.classList.remove('active');
            });
            document.querySelector(`.tab-button[onclick="showTab('${tabId}')"]`).classList.add('active');
        }

        function toggleAnswer(answerId) {
            const answerDiv = document.getElementById(answerId);
            const button = answerDiv.previousElementSibling;
            if (answerDiv.classList.contains('hidden')) {
                answerDiv.classList.remove('hidden');
                button.textContent = 'Hide Answer';
            } else {
                answerDiv.classList.add('hidden');
                button.textContent = 'Show Answer';
            }
        }

        function gcd(a, b) {
            return b === 0 ? a : gcd(b, a % b);
        }

        function toFraction(numerator, denominator) {
            if (numerator === 0) return '0';
            if (denominator === 0) return 'undefined';
            if (numerator === denominator) return '1/1';
            const common = gcd(numerator, denominator);
            return `${numerator / common}/${denominator / common}`;
        }

        function toggleNameInput(type) {
            const checkbox = document.getElementById(type);
            const nameGroup = document.getElementById(type + 'NameGroup');
            
            if (checkbox.checked) {
                nameGroup.classList.remove('hidden');
            } else {
                nameGroup.classList.add('hidden');
                document.getElementById(type + 'Name').value = '';
            }
            toggleNextOfKinSection();
        }
        
        function generateChildrenInputs() {
            const count = parseInt(document.getElementById('childrenCount').value) || 0;
            const container = document.getElementById('childrenDetails');
            container.innerHTML = '';
            
            for (let i = 1; i <= count; i++) {
                const childInput = document.createElement('div');
                childInput.className = 'child-name-input';
                childInput.innerHTML = `
                    <label>Child ${i}:</label>
                    <input type="text" id="child${i}Name" placeholder="Enter child's name">
                    <label>Status:</label>
                    <select id="child${i}Status" onchange="togglePredeceasedDetails(${i})">
                        <option value="living">Living</option>
                        <option value="predeceased">Predeceased</option>
                    </select>
                    <div id="predeceasedDetails${i}" class="hidden grandchild-details">
                        <label>Gender:</label>
                        <select id="child${i}Gender" onchange="togglePredeceasedSonWidow(${i})">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                        <div id="predeceasedSonWidow${i}" class="hidden">
                            <label>Did the predeceased son leave a widow who has not remarried?</label>
                            <input type="checkbox" id="child${i}Widow">
                        </div>
                        <label>Number of lineal descendants:</label>
                        <input type="number" id="child${i}Descendants" min="0" value="0" onchange="generateGrandchildrenInputs(${i})">
                        <div id="grandchildrenDetails${i}" class="hidden"></div>
                    </div>
                `;
                container.appendChild(childInput);
            }
            toggleNextOfKinSection();
        }

        function generateGrandchildrenInputs(childIndex) {
            const count = parseInt(document.getElementById(`child${childIndex}Descendants`).value) || 0;
            const container = document.getElementById(`grandchildrenDetails${childIndex}`);
            container.innerHTML = '';
            
            if (count > 0) {
                 container.classList.remove('hidden');
            } else {
                container.classList.add('hidden');
            }

            for (let i = 1; i <= count; i++) {
                const grandchildInput = document.createElement('div');
                grandchildInput.className = 'child-name-input';
                grandchildInput.innerHTML = `
                    <label>Grandchild ${i}:</label>
                    <input type="text" id="grandchild${childIndex}-${i}Name" placeholder="Enter grandchild's name">
                    <label>Status:</label>
                    <select id="grandchild${childIndex}-${i}Status" onchange="toggleGreatGrandchildrenInputs(${childIndex}, ${i})">
                        <option value="living">Living</option>
                        <option value="predeceased">Predeceased</option>
                    </select>
                    <div id="greatGrandchildrenDetails${childIndex}-${i}" class="hidden grandchild-details">
                        <label>Number of lineal descendants:</label>
                        <input type="number" id="greatGrandchild${childIndex}-${i}Descendants" min="0" value="0">
                    </div>
                `;
                container.appendChild(grandchildInput);
            }
            toggleNextOfKinSection();
        }
        
        function toggleGreatGrandchildrenInputs(childIndex, grandchildIndex) {
             const status = document.getElementById(`grandchild${childIndex}-${grandchildIndex}Status`).value;
             const detailsDiv = document.getElementById(`greatGrandchildrenDetails${childIndex}-${grandchildIndex}`);
             if (status === 'predeceased') {
                 detailsDiv.classList.remove('hidden');
             } else {
                 detailsDiv.classList.add('hidden');
             }
        }
        
        function togglePredeceasedDetails(i) {
            const status = document.getElementById(`child${i}Status`).value;
            const detailsDiv = document.getElementById(`predeceasedDetails${i}`);
            if (status === 'predeceased') {
                detailsDiv.classList.remove('hidden');
                togglePredeceasedSonWidow(i);
            } else {
                detailsDiv.classList.add('hidden');
                document.getElementById(`grandchildrenDetails${i}`).classList.add('hidden');
            }
            toggleNextOfKinSection();
        }

        function togglePredeceasedSonWidow(i) {
            const genderSelect = document.getElementById(`child${i}Gender`);
            const widowDiv = document.getElementById(`predeceasedSonWidow${i}`);
            if (genderSelect.value === 'male') {
                widowDiv.classList.remove('hidden');
            } else {
                widowDiv.classList.add('hidden');
            }
        }
        
        function toggleNextOfKinSection() {
            const hasSpouse = document.getElementById('spouse').checked;
            const hasFather = document.getElementById('father').checked;
            const hasMother = document.getElementById('mother').checked;
            const childrenCount = parseInt(document.getElementById('childrenCount').value) || 0;
            const nextOfKinSection = document.getElementById('nextOfKinSection');
            
            let hasLinealDescendants = false;
            for (let i = 1; i <= childrenCount; i++) {
                const childStatus = document.getElementById(`child${i}Status`)?.value;
                if (childStatus === 'living') {
                    hasLinealDescendants = true;
                    break;
                }
                if (childStatus === 'predeceased') {
                    const descendants = parseInt(document.getElementById(`child${i}Descendants`)?.value) || 0;
                    const gender = document.getElementById(`child${i}Gender`)?.value;
                    const hasWidow = document.getElementById(`child${i}Widow`)?.checked;
                    if (descendants > 0 || (gender === 'male' && hasWidow)) {
                         hasLinealDescendants = true;
                         break;
                    }
                }
            }

            if (!hasSpouse && !hasFather && !hasMother && !hasLinealDescendants) {
                nextOfKinSection.classList.remove('hidden');
            } else {
                nextOfKinSection.classList.add('hidden');
            }
        }
        
        function calculateSuccession() {
            const gender = document.getElementById('gender').value;
            const deceasedName = document.getElementById('deceasedName').value.trim();
            const hasSpouse = document.getElementById('spouse').checked;
            const hasFather = document.getElementById('father').checked;
            const hasMother = document.getElementById('mother').checked;
            const childrenCount = parseInt(document.getElementById('childrenCount').value) || 0;
            const propertyValue = parseFloat(document.getElementById('propertyValue').value) || 0;

            if (!gender || !deceasedName || propertyValue <= 0) {
                alert('Please fill all required fields including deceased name and a valid property value.');
                return;
            }

            const names = {
                deceased: deceasedName,
                spouse: hasSpouse ? (document.getElementById('spouseName').value.trim() || (gender === 'male' ? 'Widow' : 'Widower')) : '',
                father: hasFather ? (document.getElementById('fatherName').value.trim() || 'Father') : '',
                mother: hasMother ? (document.getElementById('motherName').value.trim() || 'Mother') : '',
            };

            const children = [];
            let hasLinealDescendants = false;
            for (let i = 1; i <= childrenCount; i++) {
                const childStatus = document.getElementById(`child${i}Status`)?.value;
                const childGender = document.getElementById(`child${i}Gender`)?.value;
                const childHasWidow = document.getElementById(`child${i}Widow`)?.checked || false;
                const childDescendants = parseInt(document.getElementById(`child${i}Descendants`)?.value) || 0;

                const grandchildren = [];
                for (let j = 1; j <= childDescendants; j++) {
                     const grandchildStatus = document.getElementById(`grandchild${i}-${j}Status`).value;
                     const greatGrandchildrenCount = grandchildStatus === 'predeceased' ? parseInt(document.getElementById(`greatGrandchild${i}-${j}Descendants`).value) || 0 : 0;
                     grandchildren.push({
                        name: document.getElementById(`grandchild${i}-${j}Name`).value.trim() || `Grandchild ${j}`,
                        status: grandchildStatus,
                        descendants: greatGrandchildrenCount
                    });
                }
                
                if (childStatus === 'living') {
                    hasLinealDescendants = true;
                } else if (childStatus === 'predeceased') {
                    const hasEligibleDescendant = grandchildren.some(gc => gc.status === 'living' || gc.descendants > 0);
                    if (childGender === 'male' && (hasEligibleDescendant || childHasWidow)) {
                        hasLinealDescendants = true;
                    } else if (childGender === 'female' && hasEligibleDescendant) {
                        hasLinealDescendants = true;
                    }
                }
                
                children.push({
                    name: document.getElementById(`child${i}Name`).value.trim() || `Child ${i}`,
                    status: childStatus,
                    gender: childGender,
                    descendants: childDescendants,
                    hasWidow: childHasWidow,
                    grandchildren: grandchildren
                });
            }
            
            let shares = {};
            let sectionsUsed = [];
            let explanation = '';
            let totalMainShares = 0;

            if (hasLinealDescendants || hasSpouse || hasFather || hasMother) {
                if (hasLinealDescendants) {
                    sectionsUsed = ['Section 51, 53'];
                    
                    if (hasSpouse) totalMainShares += 1;
                    if (hasFather) totalMainShares += 0.5;
                    if (hasMother) totalMainShares += 0.5;
                    
                    const eligibleChildren = children.filter(c => c.status === 'living' || (c.status === 'predeceased' && (c.grandchildren.some(gc => gc.status === 'living' || gc.descendants > 0) || c.hasWidow)));
                    totalMainShares += eligibleChildren.length;

                    if (totalMainShares > 0) {
                        const mainShareValue = propertyValue / totalMainShares;
                        
                        if (hasSpouse) {
                            shares[names.spouse] = { amount: mainShareValue, ratio: toFraction(1, totalMainShares) };
                        }
                        if (hasFather) {
                            shares[names.father] = { amount: mainShareValue * 0.5, ratio: toFraction(0.5, totalMainShares) };
                        }
                        if (hasMother) {
                            shares[names.mother] = { amount: mainShareValue * 0.5, ratio: toFraction(0.5, totalMainShares) };
                        }
                        
                        eligibleChildren.forEach(c => {
                            if (c.status === 'living') {
                                shares[c.name] = { amount: mainShareValue, ratio: toFraction(1, totalMainShares) };
                            } else if (c.status === 'predeceased') {
                                const predeceasedShare = mainShareValue;
                                
                                let subHeirs = [];
                                if (c.hasWidow) {
                                    subHeirs.push({ name: `${c.name}'s Widow`, share: 1 });
                                }

                                c.grandchildren.forEach(gc => {
                                    if (gc.status === 'living') {
                                        subHeirs.push({ name: gc.name, share: 1 });
                                    } else { 
                                        const greatGrandchildrenCount = gc.descendants;
                                        if (greatGrandchildrenCount > 0) {
                                            const subShareRatio = 1 / greatGrandchildrenCount;
                                            for (let k = 1; k <= greatGrandchildrenCount; k++) {
                                                subHeirs.push({ name: `${gc.name}'s Descendant ${k}`, share: subShareRatio });
                                            }
                                        }
                                    }
                                });

                                const subDivisionCount = subHeirs.reduce((sum, heir) => sum + heir.share, 0);
                                if (subDivisionCount > 0) {
                                    subHeirs.forEach(heir => {
                                        const finalAmount = (predeceasedShare * heir.share) / subDivisionCount;
                                        const finalRatioNumerator = heir.share * (1 / totalMainShares);
                                        const finalRatioDenominator = subDivisionCount;
                                        shares[heir.name] = { 
                                            amount: finalAmount, 
                                            ratio: toFraction(heir.share, subDivisionCount * totalMainShares) 
                                        };
                                    });
                                }
                            }
                        });
                        explanation = `The property is first divided into main shares among the spouse, living children, and parents. Then, the single share for each predeceased child's branch is distributed among their own lineal descendants (and widow, if applicable), with further subdivision for any predeceased grandchildren as per Section 53(c).`;
                    } else {
                        sectionsUsed = ['No Heirs'];
                        explanation = 'No living lineal descendants, spouse or parents. The property may pass to other relatives or escheat to the state.';
                        shares = { 'No Heirs Found': { amount: 0, ratio: '0/1' } };
                    }
                } else { // No lineal descendants
                    sectionsUsed = ['Section 54'];
                    
                    let residue = propertyValue;
                    if (hasSpouse) {
                        const spouseShare = propertyValue * 0.5;
                        shares[names.spouse] = { amount: spouseShare, ratio: '1/2' };
                        residue -= spouseShare;
                    }
                    
                    if (residue > 0) {
                         const parentsShare = residue;
                         if (hasFather && hasMother) {
                             shares[names.father] = { amount: parentsShare * 0.5, ratio: '1/4' };
                             shares[names.mother] = { amount: parentsShare * 0.5, ratio: '1/4' };
                         } else if (hasFather) {
                             shares[names.father] = { amount: parentsShare, ratio: '1/2' };
                         } else if (hasMother) {
                             shares[names.mother] = { amount: parentsShare, ratio: '1/2' };
                         }
                    }

                    if (!hasSpouse && !hasFather && !hasMother) {
                        sectionsUsed = ['Section 55'];
                        shares['Next-of-Kin (Schedule II)'] = { amount: propertyValue, ratio: '1/1' };
                    }

                    explanation = 'Since there are no lineal descendants, the property is distributed among the surviving spouse and parents as per Section 54, and the residue (if any) to next-of-kin.';
                }
            } else { // No primary heirs
                sectionsUsed = ['Section 55'];
                let nextOfKin = document.querySelector('input[name="nextOfKin"]:checked')?.value;
                if (!nextOfKin || nextOfKin === 'none') {
                    sectionsUsed = ['Section 56'];
                    explanation = 'No next-of-kin from Schedule II found. The property will be divided among the nearest degree of kindred.';
                    shares['Nearest Kindred'] = { amount: propertyValue, ratio: '1/1' };
                } else {
                    const kinMap = {
                        'fatherMother': 'Father and Mother',
                        'brothersSisters': 'Brothers and Sisters (and their descendants)',
                        'grandparents': 'Paternal and maternal grandparents',
                        'grandparentsChildren': 'Children of paternal and maternal grandparents',
                        'grandparentsParents': 'Paternal and maternal grandparents‚Äô parents',
                        'grandparentsParentsChildren': 'Grandparent‚Äôs parents children (and their descendants)',
                        'halfBrothersSisters': 'Half brothers and sisters (and their descendants)',
                        'brothersWidows': 'Widows of brothers or half brothers and widowers of sisters or half sisters',
                        'grandparentsChildrenWidows': 'Paternal or maternal grandparents children‚Äôs widows or widowers',
                        'descendantWidows': 'Widows or widowers of deceased lineal descendants',
                    };
                    explanation = `Since there are no lineal descendants, spouse, or parents, the property is fully inherited by the highest-ranking next-of-kin group from Part II of Schedule II.`;
                    shares[kinMap[nextOfKin]] = { amount: propertyValue, ratio: '1/1' };
                }
            }
            
            displayResults(shares, sectionsUsed, explanation, names, gender, hasSpouse, hasFather, hasMother, children, totalMainShares);
        }

        function displayResults(shares, sectionsUsed, explanation, names, gender, hasSpouse, hasFather, hasMother, children, totalMainShares) {
            document.getElementById('placeholder').classList.add('hidden');
            document.getElementById('successionForm').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');

            const tbody = document.getElementById('resultsBody');
            tbody.innerHTML = '';

            for (const [heir, data] of Object.entries(shares)) {
                const row = tbody.insertRow();
                row.insertCell(0).textContent = heir;
                row.insertCell(1).textContent = data.ratio;
                row.insertCell(2).textContent = `‚Çπ${data.amount.toLocaleString('en-IN', {maximumFractionDigits: 2})}`;
            }

            const sectionRef = document.getElementById('sectionReference');
            sectionRef.innerHTML = `
                <h3>üìö Legal Reference</h3>
                <p><strong>Sections Applied:</strong> ${sectionsUsed.join(' and ')}</p>
                <p><strong>Explanation:</strong> ${explanation}</p>
                <p><em>As per the Indian Succession Act, 1925</em></p>
            `;
            
            createFamilyTree(names, gender, hasSpouse, hasFather, hasMother, children);
        }
        
        function createFamilyTree(names, gender, hasSpouse, hasFather, hasMother, children) {
            const treeContainer = document.getElementById('familyTree');
            treeContainer.innerHTML = '<h3>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Tree</h3>';

            const deceasedLevel = document.createElement('div');
            deceasedLevel.className = 'tree-level';
            const deceasedNode = document.createElement('div');
            deceasedNode.className = 'tree-node deceased';
            deceasedNode.innerHTML = `<div class="tree-name">${names.deceased}</div><div class="tree-relation">Deceased ${gender === 'male' ? '‚ôÇ' : '‚ôÄ'}</div>`;
            deceasedLevel.appendChild(deceasedNode);
            treeContainer.appendChild(deceasedLevel);

            const parentsSpouseLevel = document.createElement('div');
            parentsSpouseLevel.className = 'tree-level';
            if (hasSpouse) {
                const spouseNode = document.createElement('div');
                spouseNode.className = 'tree-node heir';
                spouseNode.innerHTML = `<div class="tree-name">${names.spouse}</div><div class="tree-relation">${gender === 'male' ? 'Widow' : 'Widower'} ‚úì</div>`;
                parentsSpouseLevel.appendChild(spouseNode);
            }
            if (hasFather) {
                const fatherNode = document.createElement('div');
                fatherNode.className = 'tree-node heir';
                fatherNode.innerHTML = `<div class="tree-name">${names.father}</div><div class="tree-relation">Father ‚úì</div>`;
                parentsSpouseLevel.appendChild(fatherNode);
            }
            if (hasMother) {
                const motherNode = document.createElement('div');
                motherNode.className = 'tree-node heir';
                motherNode.innerHTML = `<div class="tree-name">${names.mother}</div><div class="tree-relation">Mother ‚úì</div>`;
                parentsSpouseLevel.appendChild(motherNode);
            }
            if (parentsSpouseLevel.children.length > 0) {
                 treeContainer.appendChild(parentsSpouseLevel);
            }

            if (children.length > 0) {
                const connector = document.createElement('div');
                connector.className = 'connection-line';
                treeContainer.appendChild(connector);

                const childrenLevel = document.createElement('div');
                childrenLevel.className = 'tree-level';

                children.forEach(child => {
                    if (child.status === 'living') {
                        const childNode = document.createElement('div');
                        childNode.className = 'tree-node heir';
                        childNode.innerHTML = `<div class="tree-name">${child.name}</div><div class="tree-relation">Child ‚úì</div>`;
                        childrenLevel.appendChild(childNode);
                    } else if (child.status === 'predeceased') {
                        const childBranch = document.createElement('div');
                        childBranch.className = 'branch';
                        childBranch.innerHTML = `
                            <div class="tree-node deceased">
                                <div class="tree-name">${child.name}</div>
                                <div class="tree-relation">Predeceased Child</div>
                            </div>
                        `;
                        const subLevel = document.createElement('div');
                        subLevel.className = 'tree-level';
                        
                        // Handle spouse of predeceased male child
                        if (child.gender === 'male' && child.hasWidow) {
                            const widowNode = document.createElement('div');
                            widowNode.className = 'tree-node heir';
                            widowNode.innerHTML = `<div class="tree-name">${child.name}'s Widow</div><div class="tree-relation">Widow ‚úì</div>`;
                            subLevel.appendChild(widowNode);
                        }

                        // Handle grandchildren
                        child.grandchildren.forEach(grandchild => {
                            if (grandchild.status === 'living') {
                                const grandchildNode = document.createElement('div');
                                grandchildNode.className = 'tree-node heir';
                                grandchildNode.innerHTML = `<div class="tree-name">${grandchild.name}</div><div class="tree-relation">Grandchild ‚úì</div>`;
                                subLevel.appendChild(grandchildNode);
                            } else { // Predeceased grandchild, handle great-grandchildren
                                const grandchildBranch = document.createElement('div');
                                grandchildBranch.className = 'branch';
                                grandchildBranch.innerHTML = `
                                    <div class="tree-node deceased">
                                        <div class="tree-name">${grandchild.name}</div>
                                        <div class="tree-relation">Predeceased Grandchild</div>
                                    </div>
                                `;
                                const greatGrandchildrenLevel = document.createElement('div');
                                greatGrandchildrenLevel.className = 'tree-level';
                                
                                for (let k = 1; k <= grandchild.descendants; k++) {
                                    const greatGrandchildNode = document.createElement('div');
                                    greatGrandchildNode.className = 'tree-node heir';
                                    greatGrandchildNode.innerHTML = `<div class="tree-name">${grandchild.name}'s Descendant ${k}</div><div class="tree-relation">G-Grandchild ‚úì</div>`;
                                    greatGrandchildrenLevel.appendChild(greatGrandchildNode);
                                }
                                grandchildBranch.appendChild(greatGrandchildrenLevel);
                                subLevel.appendChild(grandchildBranch);
                            }
                        });

                        if (subLevel.children.length > 0) {
                            childBranch.appendChild(subLevel);
                        }
                        childrenLevel.appendChild(childBranch);
                    }
                });
                if (childrenLevel.children.length > 0) {
                    treeContainer.appendChild(childrenLevel);
                }
            }
        }
    </script>
</body>
</html>
